<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `Db` struct in crate `forest_db`."><meta name="keywords" content="rust, rustlang, rust-lang, Db"><title>forest_db::sled::Db - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled ><script id="default-settings"></script><script src="../../storage.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../../favicon.svg">
<link rel="alternate icon" type="image/png" href="../../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc struct"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../forest_db/index.html'><div class='logo-container rust-logo'><img src='../../rust-logo.png' alt='logo'></div></a><p class="location">Struct Db</p><div class="sidebar-elems"><div class="block items"><a class="sidebar-title" href="#implementations">Methods</a><div class="sidebar-links"><a href="#method.checksum">checksum</a><a href="#method.drop_tree">drop_tree</a><a href="#method.export">export</a><a href="#method.generate_id">generate_id</a><a href="#method.import">import</a><a href="#method.open_tree">open_tree</a><a href="#method.size_on_disk">size_on_disk</a><a href="#method.tree_names">tree_names</a><a href="#method.was_recovered">was_recovered</a></div><a class="sidebar-title" href="#deref-methods">Methods from Deref&lt;Target=Tree&gt;</a><div class="sidebar-links"><a href="#method.apply_batch">apply_batch</a><a href="#method.checksum-1">checksum</a><a href="#method.clear">clear</a><a href="#method.compare_and_swap">compare_and_swap</a><a href="#method.contains_key">contains_key</a><a href="#method.fetch_and_update">fetch_and_update</a><a href="#method.first">first</a><a href="#method.flush">flush</a><a href="#method.flush_async">flush_async</a><a href="#method.get">get</a><a href="#method.get_gt">get_gt</a><a href="#method.get_lt">get_lt</a><a href="#method.insert">insert</a><a href="#method.is_empty">is_empty</a><a href="#method.iter">iter</a><a href="#method.last">last</a><a href="#method.len">len</a><a href="#method.merge">merge</a><a href="#method.name">name</a><a href="#method.pop_max">pop_max</a><a href="#method.pop_min">pop_min</a><a href="#method.range">range</a><a href="#method.remove">remove</a><a href="#method.scan_prefix">scan_prefix</a><a href="#method.set_merge_operator">set_merge_operator</a><a href="#method.transaction">transaction</a><a href="#method.update_and_fetch">update_and_fetch</a><a href="#method.watch_prefix">watch_prefix</a></div><a class="sidebar-title" href="#trait-implementations">Trait Implementations</a><div class="sidebar-links"><a href="#impl-Clone">Clone</a><a href="#impl-Debug">Debug</a><a href="#impl-Deref">Deref</a><a href="#impl-Send">Send</a><a href="#impl-Sync">Sync</a></div><a class="sidebar-title" href="#synthetic-implementations">Auto Trait Implementations</a><div class="sidebar-links"><a href="#impl-RefUnwindSafe">!RefUnwindSafe</a><a href="#impl-Unpin">Unpin</a><a href="#impl-UnwindSafe">!UnwindSafe</a></div><a class="sidebar-title" href="#blanket-implementations">Blanket Implementations</a><div class="sidebar-links"><a href="#impl-Any">Any</a><a href="#impl-Borrow%3CT%3E">Borrow&lt;T&gt;</a><a href="#impl-BorrowMut%3CT%3E">BorrowMut&lt;T&gt;</a><a href="#impl-From%3CT%3E">From&lt;T&gt;</a><a href="#impl-Into%3CU%3E">Into&lt;U&gt;</a><a href="#impl-Pointable">Pointable</a><a href="#impl-Same%3CT%3E">Same&lt;T&gt;</a><a href="#impl-ToOwned">ToOwned</a><a href="#impl-TryFrom%3CU%3E">TryFrom&lt;U&gt;</a><a href="#impl-TryInto%3CU%3E">TryInto&lt;U&gt;</a></div></div><p class="location"><a href="../index.html">forest_db</a>::<wbr><a href="index.html">sled</a></p><script>window.sidebarCurrent = {name: "Db", ty: "struct", relpath: ""};</script><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu"><img src="../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><script src="../../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" class="help-button">?</button>
                <a id="settings-menu" href="../../settings.html"><img src="../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></span><span class="in-band">Struct <a href="../index.html">forest_db</a>::<wbr><a href="index.html">sled</a>::<wbr><a class="struct" href="">Db</a></span></h1><div class="docblock type-decl hidden-by-usual-hider"><pre class="rust struct">pub struct Db { /* fields omitted */ }</pre></div><div class="docblock"><p>The <code>sled</code> embedded database! Implements
<code>Deref&lt;Target = sled::Tree&gt;</code> to refer to
a default keyspace / namespace / bucket.</p>
</div><h2 id="implementations" class="small-section-header">Implementations<a href="#implementations" class="anchor"></a></h2><h3 id="impl" class="impl"><code class="in-band">impl <a class="struct" href="../../forest_db/sled/struct.Db.html" title="struct forest_db::sled::Db">Db</a></code><a href="#impl" class="anchor"></a></h3><div class="impl-items"><h4 id="method.open_tree" class="method"><code>pub fn <a href="#method.open_tree" class="fnname">open_tree</a>&lt;V&gt;(&amp;self, name: V) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;Tree, Error&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;V: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>&gt;,&nbsp;</span></code></h4><div class="docblock"><p>Open or create a new disk-backed Tree with its own keyspace,
accessible from the <code>Db</code> via the provided identifier.</p>
</div><h4 id="method.drop_tree" class="method"><code>pub fn <a href="#method.drop_tree" class="fnname">drop_tree</a>&lt;V&gt;(&amp;self, name: V) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>, Error&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;V: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>&gt;,&nbsp;</span></code></h4><div class="docblock"><p>Remove a disk-backed collection.</p>
</div><h4 id="method.tree_names" class="method"><code>pub fn <a href="#method.tree_names" class="fnname">tree_names</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;IVec, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;</code></h4><div class="docblock"><p>Returns the trees names saved in this Db.</p>
</div><h4 id="method.was_recovered" class="method"><code>pub fn <a href="#method.was_recovered" class="fnname">was_recovered</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></code></h4><div class="docblock"><p>Returns <code>true</code> if the database was
recovered from a previous process.
Note that database state is only
guaranteed to be present up to the
last call to <code>flush</code>! Otherwise state
is synced to disk periodically if the
<code>sync_every_ms</code> configuration option
is set to <code>Some(number_of_ms_between_syncs)</code>
or if the IO buffer gets filled to
capacity before being rotated.</p>
</div><h4 id="method.generate_id" class="method"><code>pub fn <a href="#method.generate_id" class="fnname">generate_id</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>, Error&gt;</code></h4><div class="docblock"><p>Generate a monotonic ID. Not guaranteed to be
contiguous. Written to disk every <code>idgen_persist_interval</code>
operations, followed by a blocking flush. During recovery, we
take the last recovered generated ID and add 2x
the <code>idgen_persist_interval</code> to it. While persisting, if the
previous persisted counter wasn't synced to disk yet, we will do
a blocking flush to fsync the latest counter, ensuring
that we will never give out the same counter twice.</p>
</div><h4 id="method.export" class="method"><code>pub fn <a href="#method.export" class="fnname">export</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self<br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(</a><a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;, impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html" title="trait core::iter::traits::iterator::Iterator">Iterator</a>&lt;Item = <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">)</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;</code></h4><div class="docblock"><p>A database export method for all collections in the <code>Db</code>,
for use in sled version upgrades. Can be used in combination
with the <code>import</code> method below on a database running a later
version.</p>
<h1 id="panics" class="section-header"><a href="#panics">Panics</a></h1>
<p>Panics if any IO problems occur while trying
to perform the export.</p>
<h1 id="examples" class="section-header"><a href="#examples">Examples</a></h1>
<p>If you want to migrate from one version of sled
to another, you need to pull in both versions
by using version renaming:</p>
<p><code>Cargo.toml</code>:</p>
<pre><code class="language-toml">[dependencies]
sled = &quot;0.32&quot;
old_sled = { version = &quot;0.31&quot;, package = &quot;sled&quot; }
</code></pre>
<p>and in your code, remember that old versions of
sled might have a different way to open them
than the current <code>sled::open</code> method:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">old</span> <span class="op">=</span> <span class="ident">old_sled</span>::<span class="ident">open</span>(<span class="string">&quot;my_old_db&quot;</span>)<span class="question-mark">?</span>;

<span class="comment">// may be a different version of sled,</span>
<span class="comment">// the export type is version agnostic.</span>
<span class="kw">let</span> <span class="ident">new</span> <span class="op">=</span> <span class="ident">sled</span>::<span class="ident">open</span>(<span class="string">&quot;my_new_db&quot;</span>)<span class="question-mark">?</span>;

<span class="kw">let</span> <span class="ident">export</span> <span class="op">=</span> <span class="ident">old</span>.<span class="ident">export</span>();
<span class="ident">new</span>.<span class="ident">import</span>(<span class="ident">export</span>);

<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">old</span>.<span class="ident">checksum</span>()<span class="question-mark">?</span>, <span class="ident">new</span>.<span class="ident">checksum</span>()<span class="question-mark">?</span>);</pre></div>
</div><h4 id="method.import" class="method"><code>pub fn <a href="#method.import" class="fnname">import</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;export: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(</a><a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;, impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html" title="trait core::iter::traits::iterator::Iterator">Iterator</a>&lt;Item = <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">)</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;<br>)</code></h4><div class="docblock"><p>Imports the collections from a previous database.</p>
<h1 id="panics-1" class="section-header"><a href="#panics-1">Panics</a></h1>
<p>Panics if any IO problems occur while trying
to perform the import.</p>
<h1 id="examples-1" class="section-header"><a href="#examples-1">Examples</a></h1>
<p>If you want to migrate from one version of sled
to another, you need to pull in both versions
by using version renaming:</p>
<p><code>Cargo.toml</code>:</p>
<pre><code class="language-toml">[dependencies]
sled = &quot;0.32&quot;
old_sled = { version = &quot;0.31&quot;, package = &quot;sled&quot; }
</code></pre>
<p>and in your code, remember that old versions of
sled might have a different way to open them
than the current <code>sled::open</code> method:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">old</span> <span class="op">=</span> <span class="ident">old_sled</span>::<span class="ident">open</span>(<span class="string">&quot;my_old_db&quot;</span>)<span class="question-mark">?</span>;

<span class="comment">// may be a different version of sled,</span>
<span class="comment">// the export type is version agnostic.</span>
<span class="kw">let</span> <span class="ident">new</span> <span class="op">=</span> <span class="ident">sled</span>::<span class="ident">open</span>(<span class="string">&quot;my_new_db&quot;</span>)<span class="question-mark">?</span>;

<span class="kw">let</span> <span class="ident">export</span> <span class="op">=</span> <span class="ident">old</span>.<span class="ident">export</span>();
<span class="ident">new</span>.<span class="ident">import</span>(<span class="ident">export</span>);

<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">old</span>.<span class="ident">checksum</span>()<span class="question-mark">?</span>, <span class="ident">new</span>.<span class="ident">checksum</span>()<span class="question-mark">?</span>);</pre></div>
</div><h4 id="method.checksum" class="method"><code>pub fn <a href="#method.checksum" class="fnname">checksum</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a>, Error&gt;</code></h4><div class="docblock"><p>Returns the CRC32 of all keys and values
in this Db.</p>
<p>This is O(N) and locks all underlying Trees
for the duration of the entire scan.</p>
</div><h4 id="method.size_on_disk" class="method"><code>pub fn <a href="#method.size_on_disk" class="fnname">size_on_disk</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>, Error&gt;</code></h4><div class="docblock"><p>Returns the on-disk size of the storage files
for this database.</p>
</div></div><h2 id="deref-methods" class="small-section-header">Methods from <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>&lt;Target = Tree&gt;<a href="#deref-methods" class="anchor"></a></h2><div class="impl-items"><h4 id="method.insert" class="method"><code>pub fn <a href="#method.insert" class="fnname">insert</a>&lt;K, V&gt;(&amp;self, key: K, value: V) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;IVec&gt;, Error&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;V: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;IVec&gt;,&nbsp;</span></code></h4><div class="docblock"><p>Insert a key to a new value, returning the last value if it
was set.</p>
<h1 id="examples-2" class="section-header"><a href="#examples-2">Examples</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">0</span>]), <span class="prelude-val">Ok</span>(<span class="prelude-val">None</span>));
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">1</span>]), <span class="prelude-val">Ok</span>(<span class="prelude-val">Some</span>(<span class="ident">sled</span>::<span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">0</span>]))));</pre></div>
</div><h4 id="method.transaction" class="method"><code>pub fn <a href="#method.transaction" class="fnname">transaction</a>&lt;F, A, E&gt;(&amp;self, f: F) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;A, TransactionError&lt;E&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(&amp;TransactionalTree) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;A, ConflictableTransactionError&lt;E&gt;&gt;,&nbsp;</span></code></h4><div class="docblock"><p>Perform a multi-key serializable transaction.</p>
<h1 id="examples-3" class="section-header"><a href="#examples-3">Examples</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="comment">// Use write-only transactions as a writebatch:</span>
<span class="ident">db</span>.<span class="ident">transaction</span>(<span class="op">|</span><span class="ident">tx_db</span><span class="op">|</span> {
    <span class="ident">tx_db</span>.<span class="ident">insert</span>(<span class="string">b&quot;k1&quot;</span>, <span class="string">b&quot;cats&quot;</span>)<span class="question-mark">?</span>;
    <span class="ident">tx_db</span>.<span class="ident">insert</span>(<span class="string">b&quot;k2&quot;</span>, <span class="string">b&quot;dogs&quot;</span>)<span class="question-mark">?</span>;
    <span class="prelude-val">Ok</span>(())
})<span class="question-mark">?</span>;

<span class="comment">// Atomically swap two items:</span>
<span class="ident">db</span>.<span class="ident">transaction</span>(<span class="op">|</span><span class="ident">tx_db</span><span class="op">|</span> {
    <span class="kw">let</span> <span class="ident">v1_option</span> <span class="op">=</span> <span class="ident">tx_db</span>.<span class="ident">remove</span>(<span class="string">b&quot;k1&quot;</span>)<span class="question-mark">?</span>;
    <span class="kw">let</span> <span class="ident">v1</span> <span class="op">=</span> <span class="ident">v1_option</span>.<span class="ident">unwrap</span>();
    <span class="kw">let</span> <span class="ident">v2_option</span> <span class="op">=</span> <span class="ident">tx_db</span>.<span class="ident">remove</span>(<span class="string">b&quot;k2&quot;</span>)<span class="question-mark">?</span>;
    <span class="kw">let</span> <span class="ident">v2</span> <span class="op">=</span> <span class="ident">v2_option</span>.<span class="ident">unwrap</span>();

    <span class="ident">tx_db</span>.<span class="ident">insert</span>(<span class="string">b&quot;k1&quot;</span>, <span class="ident">v2</span>)<span class="question-mark">?</span>;
    <span class="ident">tx_db</span>.<span class="ident">insert</span>(<span class="string">b&quot;k2&quot;</span>, <span class="ident">v1</span>)<span class="question-mark">?</span>;

    <span class="prelude-val">Ok</span>(())
})<span class="question-mark">?</span>;

<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="kw-2">&amp;</span><span class="ident">db</span>.<span class="ident">get</span>(<span class="string">b&quot;k1&quot;</span>)<span class="question-mark">?</span>.<span class="ident">unwrap</span>(), <span class="string">b&quot;dogs&quot;</span>);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="kw-2">&amp;</span><span class="ident">db</span>.<span class="ident">get</span>(<span class="string">b&quot;k2&quot;</span>)<span class="question-mark">?</span>.<span class="ident">unwrap</span>(), <span class="string">b&quot;cats&quot;</span>);</pre></div>
<p>A transaction may return information from
an intentionally-cancelled transaction by using
the abort function inside the closure in
combination with the try operator.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">sled</span>::{<span class="ident">transaction</span>::{<span class="ident">abort</span>, <span class="ident">TransactionError</span>, <span class="ident">TransactionResult</span>}, <span class="ident">Config</span>};

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">PartialEq</span>)]</span>
<span class="kw">struct</span> <span class="ident">MyBullshitError</span>;

<span class="kw">fn</span> <span class="ident">main</span>() <span class="op">-</span><span class="op">&gt;</span> <span class="ident">TransactionResult</span><span class="op">&lt;</span>(), <span class="ident">MyBullshitError</span><span class="op">&gt;</span> {
    <span class="kw">let</span> <span class="ident">config</span> <span class="op">=</span> <span class="ident">Config</span>::<span class="ident">new</span>().<span class="ident">temporary</span>(<span class="bool-val">true</span>);
    <span class="kw">let</span> <span class="ident">db</span> <span class="op">=</span> <span class="ident">config</span>.<span class="ident">open</span>()<span class="question-mark">?</span>;

    <span class="comment">// Use write-only transactions as a writebatch:</span>
    <span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">db</span>.<span class="ident">transaction</span>(<span class="op">|</span><span class="ident">tx_db</span><span class="op">|</span> {
        <span class="ident">tx_db</span>.<span class="ident">insert</span>(<span class="string">b&quot;k1&quot;</span>, <span class="string">b&quot;cats&quot;</span>)<span class="question-mark">?</span>;
        <span class="ident">tx_db</span>.<span class="ident">insert</span>(<span class="string">b&quot;k2&quot;</span>, <span class="string">b&quot;dogs&quot;</span>)<span class="question-mark">?</span>;
        <span class="comment">// aborting will cause all writes to roll-back.</span>
        <span class="kw">if</span> <span class="bool-val">true</span> {
            <span class="ident">abort</span>(<span class="ident">MyBullshitError</span>)<span class="question-mark">?</span>;
        }
        <span class="prelude-val">Ok</span>(<span class="number">42</span>)
    }).<span class="ident">unwrap_err</span>();

    <span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">res</span>, <span class="ident">TransactionError</span>::<span class="ident">Abort</span>(<span class="ident">MyBullshitError</span>));
    <span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">db</span>.<span class="ident">get</span>(<span class="string">b&quot;k1&quot;</span>)<span class="question-mark">?</span>, <span class="prelude-val">None</span>);
    <span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">db</span>.<span class="ident">get</span>(<span class="string">b&quot;k2&quot;</span>)<span class="question-mark">?</span>, <span class="prelude-val">None</span>);

    <span class="prelude-val">Ok</span>(())
}</pre></div>
<p>Transactions also work on tuples of <code>Tree</code>s,
preserving serializable ACID semantics!
In this example, we treat two trees like a
work queue, atomically apply updates to
data and move them from the unprocessed <code>Tree</code>
to the processed <code>Tree</code>.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">sled</span>::<span class="ident">Transactional</span>;

<span class="kw">let</span> <span class="ident">unprocessed</span> <span class="op">=</span> <span class="ident">db</span>.<span class="ident">open_tree</span>(<span class="string">b&quot;unprocessed items&quot;</span>)<span class="question-mark">?</span>;
<span class="kw">let</span> <span class="ident">processed</span> <span class="op">=</span> <span class="ident">db</span>.<span class="ident">open_tree</span>(<span class="string">b&quot;processed items&quot;</span>)<span class="question-mark">?</span>;

<span class="comment">// An update somehow gets into the tree, which we</span>
<span class="comment">// later trigger the atomic processing of.</span>
<span class="ident">unprocessed</span>.<span class="ident">insert</span>(<span class="string">b&quot;k3&quot;</span>, <span class="string">b&quot;ligers&quot;</span>)<span class="question-mark">?</span>;

<span class="comment">// Atomically process the new item and move it</span>
<span class="comment">// between `Tree`s.</span>
(<span class="kw-2">&amp;</span><span class="ident">unprocessed</span>, <span class="kw-2">&amp;</span><span class="ident">processed</span>)
    .<span class="ident">transaction</span>(<span class="op">|</span>(<span class="ident">tx_unprocessed</span>, <span class="ident">tx_processed</span>)<span class="op">|</span> {
        <span class="kw">let</span> <span class="ident">unprocessed_item</span> <span class="op">=</span> <span class="ident">tx_unprocessed</span>.<span class="ident">remove</span>(<span class="string">b&quot;k3&quot;</span>)<span class="question-mark">?</span>.<span class="ident">unwrap</span>();
        <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">processed_item</span> <span class="op">=</span> <span class="string">b&quot;yappin&#39; &quot;</span>.<span class="ident">to_vec</span>();
        <span class="ident">processed_item</span>.<span class="ident">extend_from_slice</span>(<span class="kw-2">&amp;</span><span class="ident">unprocessed_item</span>);
        <span class="ident">tx_processed</span>.<span class="ident">insert</span>(<span class="string">b&quot;k3&quot;</span>, <span class="ident">processed_item</span>)<span class="question-mark">?</span>;
        <span class="prelude-val">Ok</span>(())
    })<span class="question-mark">?</span>;

<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">unprocessed</span>.<span class="ident">get</span>(<span class="string">b&quot;k3&quot;</span>).<span class="ident">unwrap</span>(), <span class="prelude-val">None</span>);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="kw-2">&amp;</span><span class="ident">processed</span>.<span class="ident">get</span>(<span class="string">b&quot;k3&quot;</span>).<span class="ident">unwrap</span>().<span class="ident">unwrap</span>(), <span class="string">b&quot;yappin&#39; ligers&quot;</span>);</pre></div>
</div><h4 id="method.apply_batch" class="method"><code>pub fn <a href="#method.apply_batch" class="fnname">apply_batch</a>(&amp;self, batch: <a class="struct" href="../../forest_db/sled/struct.Batch.html" title="struct forest_db::sled::Batch">Batch</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, Error&gt;</code></h4><div class="docblock"><p>Create a new batched update that can be
atomically applied.</p>
<p>It is possible to apply a <code>Batch</code> in a transaction
as well, which is the way you can apply a <code>Batch</code>
to multiple <code>Tree</code>s atomically.</p>
<h1 id="examples-4" class="section-header"><a href="#examples-4">Examples</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="string">&quot;key_0&quot;</span>, <span class="string">&quot;val_0&quot;</span>)<span class="question-mark">?</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">batch</span> <span class="op">=</span> <span class="ident">sled</span>::<span class="ident">Batch</span>::<span class="ident">default</span>();
<span class="ident">batch</span>.<span class="ident">insert</span>(<span class="string">&quot;key_a&quot;</span>, <span class="string">&quot;val_a&quot;</span>);
<span class="ident">batch</span>.<span class="ident">insert</span>(<span class="string">&quot;key_b&quot;</span>, <span class="string">&quot;val_b&quot;</span>);
<span class="ident">batch</span>.<span class="ident">insert</span>(<span class="string">&quot;key_c&quot;</span>, <span class="string">&quot;val_c&quot;</span>);
<span class="ident">batch</span>.<span class="ident">remove</span>(<span class="string">&quot;key_0&quot;</span>);

<span class="ident">db</span>.<span class="ident">apply_batch</span>(<span class="ident">batch</span>)<span class="question-mark">?</span>;
<span class="comment">// key_0 no longer exists, and key_a, key_b, and key_c</span>
<span class="comment">// now do exist.</span></pre></div>
</div><h4 id="method.get" class="method"><code>pub fn <a href="#method.get" class="fnname">get</a>&lt;K&gt;(&amp;self, key: K) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;IVec&gt;, Error&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>&gt;,&nbsp;</span></code></h4><div class="docblock"><p>Retrieve a value from the <code>Tree</code> if it exists.</p>
<h1 id="examples-5" class="section-header"><a href="#examples-5">Examples</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">0</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">0</span>])<span class="question-mark">?</span>;
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">db</span>.<span class="ident">get</span>(<span class="kw-2">&amp;</span>[<span class="number">0</span>]), <span class="prelude-val">Ok</span>(<span class="prelude-val">Some</span>(<span class="ident">sled</span>::<span class="ident">IVec</span>::<span class="ident">from</span>(<span class="macro">vec</span><span class="macro">!</span>[<span class="number">0</span>]))));
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">db</span>.<span class="ident">get</span>(<span class="kw-2">&amp;</span>[<span class="number">1</span>]), <span class="prelude-val">Ok</span>(<span class="prelude-val">None</span>));</pre></div>
</div><h4 id="method.remove" class="method"><code>pub fn <a href="#method.remove" class="fnname">remove</a>&lt;K&gt;(&amp;self, key: K) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;IVec&gt;, Error&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>&gt;,&nbsp;</span></code></h4><div class="docblock"><p>Delete a value, returning the old value if it existed.</p>
<h1 id="examples-6" class="section-header"><a href="#examples-6">Examples</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">1</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">1</span>]);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">db</span>.<span class="ident">remove</span>(<span class="kw-2">&amp;</span>[<span class="number">1</span>]), <span class="prelude-val">Ok</span>(<span class="prelude-val">Some</span>(<span class="ident">sled</span>::<span class="ident">IVec</span>::<span class="ident">from</span>(<span class="macro">vec</span><span class="macro">!</span>[<span class="number">1</span>]))));
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">db</span>.<span class="ident">remove</span>(<span class="kw-2">&amp;</span>[<span class="number">1</span>]), <span class="prelude-val">Ok</span>(<span class="prelude-val">None</span>));</pre></div>
</div><h4 id="method.compare_and_swap" class="method"><code>pub fn <a href="#method.compare_and_swap" class="fnname">compare_and_swap</a>&lt;K, OV, NV&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;key: K, <br>&nbsp;&nbsp;&nbsp;&nbsp;old: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;OV&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;new: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;NV&gt;<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, CompareAndSwapError&gt;, Error&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;OV: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;NV: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;IVec&gt;,&nbsp;</span></code></h4><div class="docblock"><p>Compare and swap. Capable of unique creation, conditional modification,
or deletion. If old is <code>None</code>, this will only set the value if it
doesn't exist yet. If new is <code>None</code>, will delete the value if old is
correct. If both old and new are <code>Some</code>, will modify the value if
old is correct.</p>
<p>It returns <code>Ok(Ok(()))</code> if operation finishes successfully.</p>
<p>If it fails it returns:
- <code>Ok(Err(CompareAndSwapError(current, proposed)))</code> if operation
failed to setup a new value. <code>CompareAndSwapError</code> contains
current and proposed values.
- <code>Err(Error::Unsupported)</code> if the database is opened in read-only
mode.</p>
<h1 id="examples-7" class="section-header"><a href="#examples-7">Examples</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="comment">// unique creation</span>
<span class="macro">assert_eq</span><span class="macro">!</span>(
    <span class="ident">db</span>.<span class="ident">compare_and_swap</span>(<span class="kw-2">&amp;</span>[<span class="number">1</span>], <span class="prelude-val">None</span> <span class="kw">as</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="kw-2">&amp;</span>[<span class="ident">u8</span>]<span class="op">&gt;</span>, <span class="prelude-val">Some</span>(<span class="kw-2">&amp;</span>[<span class="number">10</span>])),
    <span class="prelude-val">Ok</span>(<span class="prelude-val">Ok</span>(()))
);

<span class="comment">// conditional modification</span>
<span class="macro">assert_eq</span><span class="macro">!</span>(
    <span class="ident">db</span>.<span class="ident">compare_and_swap</span>(<span class="kw-2">&amp;</span>[<span class="number">1</span>], <span class="prelude-val">Some</span>(<span class="kw-2">&amp;</span>[<span class="number">10</span>]), <span class="prelude-val">Some</span>(<span class="kw-2">&amp;</span>[<span class="number">20</span>])),
    <span class="prelude-val">Ok</span>(<span class="prelude-val">Ok</span>(()))
);

<span class="comment">// failed conditional modification -- the current value is returned in</span>
<span class="comment">// the error variant</span>
<span class="kw">let</span> <span class="ident">operation</span> <span class="op">=</span> <span class="ident">db</span>.<span class="ident">compare_and_swap</span>(<span class="kw-2">&amp;</span>[<span class="number">1</span>], <span class="prelude-val">Some</span>(<span class="kw-2">&amp;</span>[<span class="number">30</span>]), <span class="prelude-val">Some</span>(<span class="kw-2">&amp;</span>[<span class="number">40</span>]));
<span class="macro">assert</span><span class="macro">!</span>(<span class="ident">operation</span>.<span class="ident">is_ok</span>()); <span class="comment">// the operation succeeded</span>
<span class="kw">let</span> <span class="ident">modification</span> <span class="op">=</span> <span class="ident">operation</span>.<span class="ident">unwrap</span>();
<span class="macro">assert</span><span class="macro">!</span>(<span class="ident">modification</span>.<span class="ident">is_err</span>());
<span class="kw">let</span> <span class="ident">actual_value</span> <span class="op">=</span> <span class="ident">modification</span>.<span class="ident">unwrap_err</span>();
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">actual_value</span>.<span class="ident">current</span>.<span class="ident">map</span>(<span class="op">|</span><span class="ident">ivec</span><span class="op">|</span> <span class="ident">ivec</span>.<span class="ident">to_vec</span>()), <span class="prelude-val">Some</span>(<span class="macro">vec</span><span class="macro">!</span>[<span class="number">20</span>]));

<span class="comment">// conditional deletion</span>
<span class="macro">assert_eq</span><span class="macro">!</span>(
    <span class="ident">db</span>.<span class="ident">compare_and_swap</span>(<span class="kw-2">&amp;</span>[<span class="number">1</span>], <span class="prelude-val">Some</span>(<span class="kw-2">&amp;</span>[<span class="number">20</span>]), <span class="prelude-val">None</span> <span class="kw">as</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="kw-2">&amp;</span>[<span class="ident">u8</span>]<span class="op">&gt;</span>),
    <span class="prelude-val">Ok</span>(<span class="prelude-val">Ok</span>(()))
);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">db</span>.<span class="ident">get</span>(<span class="kw-2">&amp;</span>[<span class="number">1</span>]), <span class="prelude-val">Ok</span>(<span class="prelude-val">None</span>));</pre></div>
</div><h4 id="method.update_and_fetch" class="method"><code>pub fn <a href="#method.update_and_fetch" class="fnname">update_and_fetch</a>&lt;K, V, F&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;key: K, <br>&nbsp;&nbsp;&nbsp;&nbsp;f: F<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;IVec&gt;, Error&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;V: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;IVec&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;V&gt;,&nbsp;</span></code></h4><div class="docblock"><p>Fetch the value, apply a function to it and return the result.</p>
<h1 id="note" class="section-header"><a href="#note">Note</a></h1>
<p>This may call the function multiple times if the value has been
changed from other threads in the meantime.</p>
<h1 id="examples-8" class="section-header"><a href="#examples-8">Examples</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">sled</span>::{<span class="ident">Config</span>, <span class="ident">Error</span>, <span class="ident">IVec</span>};
<span class="kw">use</span> <span class="ident">std</span>::<span class="ident">convert</span>::<span class="ident">TryInto</span>;

<span class="kw">let</span> <span class="ident">config</span> <span class="op">=</span> <span class="ident">Config</span>::<span class="ident">new</span>().<span class="ident">temporary</span>(<span class="bool-val">true</span>);
<span class="kw">let</span> <span class="ident">db</span> <span class="op">=</span> <span class="ident">config</span>.<span class="ident">open</span>()<span class="question-mark">?</span>;

<span class="kw">fn</span> <span class="ident">u64_to_ivec</span>(<span class="ident">number</span>: <span class="ident">u64</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">IVec</span> {
    <span class="ident">IVec</span>::<span class="ident">from</span>(<span class="ident">number</span>.<span class="ident">to_be_bytes</span>().<span class="ident">to_vec</span>())
}

<span class="kw">let</span> <span class="ident">zero</span> <span class="op">=</span> <span class="ident">u64_to_ivec</span>(<span class="number">0</span>);
<span class="kw">let</span> <span class="ident">one</span> <span class="op">=</span> <span class="ident">u64_to_ivec</span>(<span class="number">1</span>);
<span class="kw">let</span> <span class="ident">two</span> <span class="op">=</span> <span class="ident">u64_to_ivec</span>(<span class="number">2</span>);
<span class="kw">let</span> <span class="ident">three</span> <span class="op">=</span> <span class="ident">u64_to_ivec</span>(<span class="number">3</span>);

<span class="kw">fn</span> <span class="ident">increment</span>(<span class="ident">old</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="kw-2">&amp;</span>[<span class="ident">u8</span>]<span class="op">&gt;</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">u8</span><span class="op">&gt;</span><span class="op">&gt;</span> {
    <span class="kw">let</span> <span class="ident">number</span> <span class="op">=</span> <span class="kw">match</span> <span class="ident">old</span> {
        <span class="prelude-val">Some</span>(<span class="ident">bytes</span>) <span class="op">=</span><span class="op">&gt;</span> {
            <span class="kw">let</span> <span class="ident">array</span>: [<span class="ident">u8</span>; <span class="number">8</span>] <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">try_into</span>().<span class="ident">unwrap</span>();
            <span class="kw">let</span> <span class="ident">number</span> <span class="op">=</span> <span class="ident">u64</span>::<span class="ident">from_be_bytes</span>(<span class="ident">array</span>);
            <span class="ident">number</span> <span class="op">+</span> <span class="number">1</span>
        }
        <span class="prelude-val">None</span> <span class="op">=</span><span class="op">&gt;</span> <span class="number">0</span>,
    };

    <span class="prelude-val">Some</span>(<span class="ident">number</span>.<span class="ident">to_be_bytes</span>().<span class="ident">to_vec</span>())
}

<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">db</span>.<span class="ident">update_and_fetch</span>(<span class="string">&quot;counter&quot;</span>, <span class="ident">increment</span>), <span class="prelude-val">Ok</span>(<span class="prelude-val">Some</span>(<span class="ident">zero</span>)));
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">db</span>.<span class="ident">update_and_fetch</span>(<span class="string">&quot;counter&quot;</span>, <span class="ident">increment</span>), <span class="prelude-val">Ok</span>(<span class="prelude-val">Some</span>(<span class="ident">one</span>)));
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">db</span>.<span class="ident">update_and_fetch</span>(<span class="string">&quot;counter&quot;</span>, <span class="ident">increment</span>), <span class="prelude-val">Ok</span>(<span class="prelude-val">Some</span>(<span class="ident">two</span>)));
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">db</span>.<span class="ident">update_and_fetch</span>(<span class="string">&quot;counter&quot;</span>, <span class="ident">increment</span>), <span class="prelude-val">Ok</span>(<span class="prelude-val">Some</span>(<span class="ident">three</span>)));</pre></div>
</div><h4 id="method.fetch_and_update" class="method"><code>pub fn <a href="#method.fetch_and_update" class="fnname">fetch_and_update</a>&lt;K, V, F&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;key: K, <br>&nbsp;&nbsp;&nbsp;&nbsp;f: F<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;IVec&gt;, Error&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;V: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;IVec&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;V&gt;,&nbsp;</span></code></h4><div class="docblock"><p>Fetch the value, apply a function to it and return the previous value.</p>
<h1 id="note-1" class="section-header"><a href="#note-1">Note</a></h1>
<p>This may call the function multiple times if the value has been
changed from other threads in the meantime.</p>
<h1 id="examples-9" class="section-header"><a href="#examples-9">Examples</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">sled</span>::{<span class="ident">Config</span>, <span class="ident">Error</span>, <span class="ident">IVec</span>};
<span class="kw">use</span> <span class="ident">std</span>::<span class="ident">convert</span>::<span class="ident">TryInto</span>;

<span class="kw">let</span> <span class="ident">config</span> <span class="op">=</span> <span class="ident">Config</span>::<span class="ident">new</span>().<span class="ident">temporary</span>(<span class="bool-val">true</span>);
<span class="kw">let</span> <span class="ident">db</span> <span class="op">=</span> <span class="ident">config</span>.<span class="ident">open</span>()<span class="question-mark">?</span>;

<span class="kw">fn</span> <span class="ident">u64_to_ivec</span>(<span class="ident">number</span>: <span class="ident">u64</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">IVec</span> {
    <span class="ident">IVec</span>::<span class="ident">from</span>(<span class="ident">number</span>.<span class="ident">to_be_bytes</span>().<span class="ident">to_vec</span>())
}

<span class="kw">let</span> <span class="ident">zero</span> <span class="op">=</span> <span class="ident">u64_to_ivec</span>(<span class="number">0</span>);
<span class="kw">let</span> <span class="ident">one</span> <span class="op">=</span> <span class="ident">u64_to_ivec</span>(<span class="number">1</span>);
<span class="kw">let</span> <span class="ident">two</span> <span class="op">=</span> <span class="ident">u64_to_ivec</span>(<span class="number">2</span>);

<span class="kw">fn</span> <span class="ident">increment</span>(<span class="ident">old</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="kw-2">&amp;</span>[<span class="ident">u8</span>]<span class="op">&gt;</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">u8</span><span class="op">&gt;</span><span class="op">&gt;</span> {
    <span class="kw">let</span> <span class="ident">number</span> <span class="op">=</span> <span class="kw">match</span> <span class="ident">old</span> {
        <span class="prelude-val">Some</span>(<span class="ident">bytes</span>) <span class="op">=</span><span class="op">&gt;</span> {
            <span class="kw">let</span> <span class="ident">array</span>: [<span class="ident">u8</span>; <span class="number">8</span>] <span class="op">=</span> <span class="ident">bytes</span>.<span class="ident">try_into</span>().<span class="ident">unwrap</span>();
            <span class="kw">let</span> <span class="ident">number</span> <span class="op">=</span> <span class="ident">u64</span>::<span class="ident">from_be_bytes</span>(<span class="ident">array</span>);
            <span class="ident">number</span> <span class="op">+</span> <span class="number">1</span>
        }
        <span class="prelude-val">None</span> <span class="op">=</span><span class="op">&gt;</span> <span class="number">0</span>,
    };

    <span class="prelude-val">Some</span>(<span class="ident">number</span>.<span class="ident">to_be_bytes</span>().<span class="ident">to_vec</span>())
}

<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">db</span>.<span class="ident">fetch_and_update</span>(<span class="string">&quot;counter&quot;</span>, <span class="ident">increment</span>), <span class="prelude-val">Ok</span>(<span class="prelude-val">None</span>));
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">db</span>.<span class="ident">fetch_and_update</span>(<span class="string">&quot;counter&quot;</span>, <span class="ident">increment</span>), <span class="prelude-val">Ok</span>(<span class="prelude-val">Some</span>(<span class="ident">zero</span>)));
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">db</span>.<span class="ident">fetch_and_update</span>(<span class="string">&quot;counter&quot;</span>, <span class="ident">increment</span>), <span class="prelude-val">Ok</span>(<span class="prelude-val">Some</span>(<span class="ident">one</span>)));
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">db</span>.<span class="ident">fetch_and_update</span>(<span class="string">&quot;counter&quot;</span>, <span class="ident">increment</span>), <span class="prelude-val">Ok</span>(<span class="prelude-val">Some</span>(<span class="ident">two</span>)));</pre></div>
</div><h4 id="method.watch_prefix" class="method"><code>pub fn <a href="#method.watch_prefix" class="fnname">watch_prefix</a>&lt;P&gt;(&amp;self, prefix: P) -&gt; Subscriber <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;P: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>&gt;,&nbsp;</span></code></h4><div class="docblock"><p>Subscribe to <code>Event</code>s that happen to keys that have
the specified prefix. Events for particular keys are
guaranteed to be witnessed in the same order by all
threads, but threads may witness different interleavings
of <code>Event</code>s across different keys. If subscribers don't
keep up with new writes, they will cause new writes
to block. There is a buffer of 1024 items per
<code>Subscriber</code>. This can be used to build reactive
and replicated systems.</p>
<p><code>Subscriber</code> implements both <code>Iterator&lt;Item = Event&gt;</code>
and <code>Future&lt;Output=Option&lt;Event&gt;&gt;</code></p>
<h1 id="examples-10" class="section-header"><a href="#examples-10">Examples</a></h1>
<p>Synchronous, blocking subscriber:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="comment">// watch all events by subscribing to the empty prefix</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">subscriber</span> <span class="op">=</span> <span class="ident">db</span>.<span class="ident">watch_prefix</span>(<span class="macro">vec</span><span class="macro">!</span>[]);

<span class="kw">let</span> <span class="ident">tree_2</span> <span class="op">=</span> <span class="ident">db</span>.<span class="ident">clone</span>();
<span class="kw">let</span> <span class="ident">thread</span> <span class="op">=</span> <span class="ident">std</span>::<span class="ident">thread</span>::<span class="ident">spawn</span>(<span class="kw">move</span> <span class="op">|</span><span class="op">|</span> {
    <span class="ident">db</span>.<span class="ident">insert</span>(<span class="macro">vec</span><span class="macro">!</span>[<span class="number">0</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">1</span>])
});

<span class="comment">// `Subscription` implements `Iterator&lt;Item=Event&gt;`</span>
<span class="kw">for</span> <span class="ident">event</span> <span class="kw">in</span> <span class="ident">subscriber</span>.<span class="ident">take</span>(<span class="number">1</span>) {
    <span class="kw">match</span> <span class="ident">event</span> {
        <span class="ident">sled</span>::<span class="ident">Event</span>::<span class="ident">Insert</span>{ <span class="ident">key</span>, <span class="ident">value</span> } <span class="op">=</span><span class="op">&gt;</span> <span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">key</span>.<span class="ident">as_ref</span>(), <span class="kw-2">&amp;</span>[<span class="number">0</span>]),
        <span class="ident">sled</span>::<span class="ident">Event</span>::<span class="ident">Remove</span> {<span class="ident">key</span> } <span class="op">=</span><span class="op">&gt;</span> {}
    }
}
</pre></div>
<p>Aynchronous, non-blocking subscriber:</p>
<p><code>Subscription</code> implements <code>Future&lt;Output=Option&lt;Event&gt;&gt;</code>.</p>
<p><code>while let Some(event) = (&amp;mut subscriber).await { /* use it */ }</code></p>
</div><h4 id="method.flush" class="method"><code>pub fn <a href="#method.flush" class="fnname">flush</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, Error&gt;</code></h4><div class="docblock"><p>Synchronously flushes all dirty IO buffers and calls
fsync. If this succeeds, it is guaranteed that all
previous writes will be recovered if the system
crashes. Returns the number of bytes flushed during
this call.</p>
<p>Flushing can take quite a lot of time, and you should
measure the performance impact of using it on
realistic sustained workloads running on realistic
hardware.</p>
</div><h4 id="method.flush_async" class="method"><code>pub async fn <a href="#method.flush_async" class="fnname">flush_async</a>(&amp;'_ self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, Error&gt;</code></h4><div class="docblock"><p>Asynchronously flushes all dirty IO buffers
and calls fsync. If this succeeds, it is
guaranteed that all previous writes will
be recovered if the system crashes. Returns
the number of bytes flushed during this call.</p>
<p>Flushing can take quite a lot of time, and you
should measure the performance impact of
using it on realistic sustained workloads
running on realistic hardware.</p>
</div><h4 id="method.contains_key" class="method"><code>pub fn <a href="#method.contains_key" class="fnname">contains_key</a>&lt;K&gt;(&amp;self, key: K) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>, Error&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>&gt;,&nbsp;</span></code></h4><div class="docblock"><p>Returns <code>true</code> if the <code>Tree</code> contains a value for
the specified key.</p>
<h1 id="examples-11" class="section-header"><a href="#examples-11">Examples</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">0</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">0</span>])<span class="question-mark">?</span>;
<span class="macro">assert</span><span class="macro">!</span>(<span class="ident">db</span>.<span class="ident">contains_key</span>(<span class="kw-2">&amp;</span>[<span class="number">0</span>])<span class="question-mark">?</span>);
<span class="macro">assert</span><span class="macro">!</span>(<span class="op">!</span><span class="ident">db</span>.<span class="ident">contains_key</span>(<span class="kw-2">&amp;</span>[<span class="number">1</span>])<span class="question-mark">?</span>);</pre></div>
</div><h4 id="method.get_lt" class="method"><code>pub fn <a href="#method.get_lt" class="fnname">get_lt</a>&lt;K&gt;(&amp;self, key: K) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(</a>IVec, IVec<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">)</a>&gt;, Error&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>&gt;,&nbsp;</span></code></h4><div class="docblock"><p>Retrieve the key and value before the provided key,
if one exists.</p>
<h1 id="examples-12" class="section-header"><a href="#examples-12">Examples</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">sled</span>::<span class="ident">IVec</span>;
<span class="kw">for</span> <span class="ident">i</span> <span class="kw">in</span> <span class="number">0</span>..<span class="number">10</span> {
    <span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="ident">i</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="ident">i</span>])
        .<span class="ident">expect</span>(<span class="string">&quot;should write successfully&quot;</span>);
}

<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">db</span>.<span class="ident">get_lt</span>(<span class="kw-2">&amp;</span>[]), <span class="prelude-val">Ok</span>(<span class="prelude-val">None</span>));
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">db</span>.<span class="ident">get_lt</span>(<span class="kw-2">&amp;</span>[<span class="number">0</span>]), <span class="prelude-val">Ok</span>(<span class="prelude-val">None</span>));
<span class="macro">assert_eq</span><span class="macro">!</span>(
    <span class="ident">db</span>.<span class="ident">get_lt</span>(<span class="kw-2">&amp;</span>[<span class="number">1</span>]),
    <span class="prelude-val">Ok</span>(<span class="prelude-val">Some</span>((<span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">0</span>]), <span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">0</span>]))))
);
<span class="macro">assert_eq</span><span class="macro">!</span>(
    <span class="ident">db</span>.<span class="ident">get_lt</span>(<span class="kw-2">&amp;</span>[<span class="number">9</span>]),
    <span class="prelude-val">Ok</span>(<span class="prelude-val">Some</span>((<span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">8</span>]), <span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">8</span>]))))
);
<span class="macro">assert_eq</span><span class="macro">!</span>(
    <span class="ident">db</span>.<span class="ident">get_lt</span>(<span class="kw-2">&amp;</span>[<span class="number">10</span>]),
    <span class="prelude-val">Ok</span>(<span class="prelude-val">Some</span>((<span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">9</span>]), <span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">9</span>]))))
);
<span class="macro">assert_eq</span><span class="macro">!</span>(
    <span class="ident">db</span>.<span class="ident">get_lt</span>(<span class="kw-2">&amp;</span>[<span class="number">255</span>]),
    <span class="prelude-val">Ok</span>(<span class="prelude-val">Some</span>((<span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">9</span>]), <span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">9</span>]))))
);</pre></div>
</div><h4 id="method.get_gt" class="method"><code>pub fn <a href="#method.get_gt" class="fnname">get_gt</a>&lt;K&gt;(&amp;self, key: K) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(</a>IVec, IVec<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">)</a>&gt;, Error&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>&gt;,&nbsp;</span></code></h4><div class="docblock"><p>Retrieve the next key and value from the <code>Tree</code> after the
provided key.</p>
<h1 id="note-2" class="section-header"><a href="#note-2">Note</a></h1>
<p>The order follows the Ord implementation for <code>Vec&lt;u8&gt;</code>:</p>
<p><code>[] &lt; [0] &lt; [255] &lt; [255, 0] &lt; [255, 255] ...</code></p>
<p>To retain the ordering of numerical types use big endian reprensentation</p>
<h1 id="examples-13" class="section-header"><a href="#examples-13">Examples</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">sled</span>::<span class="ident">IVec</span>;
<span class="kw">for</span> <span class="ident">i</span> <span class="kw">in</span> <span class="number">0</span>..<span class="number">10</span> {
    <span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="ident">i</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="ident">i</span>])<span class="question-mark">?</span>;
}

<span class="macro">assert_eq</span><span class="macro">!</span>(
    <span class="ident">db</span>.<span class="ident">get_gt</span>(<span class="kw-2">&amp;</span>[]),
    <span class="prelude-val">Ok</span>(<span class="prelude-val">Some</span>((<span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">0</span>]), <span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">0</span>]))))
);
<span class="macro">assert_eq</span><span class="macro">!</span>(
    <span class="ident">db</span>.<span class="ident">get_gt</span>(<span class="kw-2">&amp;</span>[<span class="number">0</span>]),
    <span class="prelude-val">Ok</span>(<span class="prelude-val">Some</span>((<span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">1</span>]), <span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">1</span>]))))
);
<span class="macro">assert_eq</span><span class="macro">!</span>(
    <span class="ident">db</span>.<span class="ident">get_gt</span>(<span class="kw-2">&amp;</span>[<span class="number">1</span>]),
    <span class="prelude-val">Ok</span>(<span class="prelude-val">Some</span>((<span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">2</span>]), <span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">2</span>]))))
);
<span class="macro">assert_eq</span><span class="macro">!</span>(
    <span class="ident">db</span>.<span class="ident">get_gt</span>(<span class="kw-2">&amp;</span>[<span class="number">8</span>]),
    <span class="prelude-val">Ok</span>(<span class="prelude-val">Some</span>((<span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">9</span>]), <span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">9</span>]))))
);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">db</span>.<span class="ident">get_gt</span>(<span class="kw-2">&amp;</span>[<span class="number">9</span>]), <span class="prelude-val">Ok</span>(<span class="prelude-val">None</span>));

<span class="ident">db</span>.<span class="ident">insert</span>(<span class="number">500u16</span>.<span class="ident">to_be_bytes</span>(), <span class="macro">vec</span><span class="macro">!</span>[<span class="number">10</span>]);
<span class="macro">assert_eq</span><span class="macro">!</span>(
    <span class="ident">db</span>.<span class="ident">get_gt</span>(<span class="kw-2">&amp;</span><span class="number">499u16</span>.<span class="ident">to_be_bytes</span>()),
    <span class="prelude-val">Ok</span>(<span class="prelude-val">Some</span>((<span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span><span class="number">500u16</span>.<span class="ident">to_be_bytes</span>()), <span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">10</span>]))))
);</pre></div>
</div><h4 id="method.merge" class="method"><code>pub fn <a href="#method.merge" class="fnname">merge</a>&lt;K, V&gt;(&amp;self, key: K, value: V) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;IVec&gt;, Error&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;V: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>&gt;,&nbsp;</span></code></h4><div class="docblock"><p>Merge state directly into a given key's value using the
configured merge operator. This allows state to be written
into a value directly, without any read-modify-write steps.
Merge operators can be used to implement arbitrary data
structures.</p>
<p>Calling <code>merge</code> will return an <code>Unsupported</code> error if it
is called without first setting a merge operator function.</p>
<p>Merge operators are shared by all instances of a particular
<code>Tree</code>. Different merge operators may be set on different
<code>Tree</code>s.</p>
<h1 id="examples-14" class="section-header"><a href="#examples-14">Examples</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">sled</span>::<span class="ident">IVec</span>;

<span class="kw">fn</span> <span class="ident">concatenate_merge</span>(
  <span class="ident">_key</span>: <span class="kw-2">&amp;</span>[<span class="ident">u8</span>],               <span class="comment">// the key being merged</span>
  <span class="ident">old_value</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="kw-2">&amp;</span>[<span class="ident">u8</span>]<span class="op">&gt;</span>,  <span class="comment">// the previous value, if one existed</span>
  <span class="ident">merged_bytes</span>: <span class="kw-2">&amp;</span>[<span class="ident">u8</span>]        <span class="comment">// the new bytes being merged in</span>
) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">u8</span><span class="op">&gt;</span><span class="op">&gt;</span> {       <span class="comment">// set the new value, return None to delete</span>
  <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">ret</span> <span class="op">=</span> <span class="ident">old_value</span>
    .<span class="ident">map</span>(<span class="op">|</span><span class="ident">ov</span><span class="op">|</span> <span class="ident">ov</span>.<span class="ident">to_vec</span>())
    .<span class="ident">unwrap_or_else</span>(<span class="op">|</span><span class="op">|</span> <span class="macro">vec</span><span class="macro">!</span>[]);

  <span class="ident">ret</span>.<span class="ident">extend_from_slice</span>(<span class="ident">merged_bytes</span>);

  <span class="prelude-val">Some</span>(<span class="ident">ret</span>)
}

<span class="ident">db</span>.<span class="ident">set_merge_operator</span>(<span class="ident">concatenate_merge</span>);

<span class="kw">let</span> <span class="ident">k</span> <span class="op">=</span> <span class="string">b&quot;k1&quot;</span>;

<span class="ident">db</span>.<span class="ident">insert</span>(<span class="ident">k</span>, <span class="macro">vec</span><span class="macro">!</span>[<span class="number">0</span>]);
<span class="ident">db</span>.<span class="ident">merge</span>(<span class="ident">k</span>, <span class="macro">vec</span><span class="macro">!</span>[<span class="number">1</span>]);
<span class="ident">db</span>.<span class="ident">merge</span>(<span class="ident">k</span>, <span class="macro">vec</span><span class="macro">!</span>[<span class="number">2</span>]);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">db</span>.<span class="ident">get</span>(<span class="ident">k</span>), <span class="prelude-val">Ok</span>(<span class="prelude-val">Some</span>(<span class="ident">IVec</span>::<span class="ident">from</span>(<span class="macro">vec</span><span class="macro">!</span>[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]))));

<span class="comment">// Replace previously merged data. The merge function will not be called.</span>
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="ident">k</span>, <span class="macro">vec</span><span class="macro">!</span>[<span class="number">3</span>]);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">db</span>.<span class="ident">get</span>(<span class="ident">k</span>), <span class="prelude-val">Ok</span>(<span class="prelude-val">Some</span>(<span class="ident">IVec</span>::<span class="ident">from</span>(<span class="macro">vec</span><span class="macro">!</span>[<span class="number">3</span>]))));

<span class="comment">// Merges on non-present values will cause the merge function to be called</span>
<span class="comment">// with `old_value == None`. If the merge function returns something (which it</span>
<span class="comment">// does, in this case) a new value will be inserted.</span>
<span class="ident">db</span>.<span class="ident">remove</span>(<span class="ident">k</span>);
<span class="ident">db</span>.<span class="ident">merge</span>(<span class="ident">k</span>, <span class="macro">vec</span><span class="macro">!</span>[<span class="number">4</span>]);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">db</span>.<span class="ident">get</span>(<span class="ident">k</span>), <span class="prelude-val">Ok</span>(<span class="prelude-val">Some</span>(<span class="ident">IVec</span>::<span class="ident">from</span>(<span class="macro">vec</span><span class="macro">!</span>[<span class="number">4</span>]))));</pre></div>
</div><h4 id="method.set_merge_operator" class="method"><code>pub fn <a href="#method.set_merge_operator" class="fnname">set_merge_operator</a>(&amp;self, merge_operator: impl MergeOperator + 'static)</code></h4><div class="docblock"><p>Sets a merge operator for use with the <code>merge</code> function.</p>
<p>Merge state directly into a given key's value using the
configured merge operator. This allows state to be written
into a value directly, without any read-modify-write steps.
Merge operators can be used to implement arbitrary data
structures.</p>
<h1 id="panics-2" class="section-header"><a href="#panics-2">Panics</a></h1>
<p>Calling <code>merge</code> will panic if no merge operator has been
configured.</p>
<h1 id="examples-15" class="section-header"><a href="#examples-15">Examples</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">sled</span>::<span class="ident">IVec</span>;

<span class="kw">fn</span> <span class="ident">concatenate_merge</span>(
  <span class="ident">_key</span>: <span class="kw-2">&amp;</span>[<span class="ident">u8</span>],               <span class="comment">// the key being merged</span>
  <span class="ident">old_value</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="kw-2">&amp;</span>[<span class="ident">u8</span>]<span class="op">&gt;</span>,  <span class="comment">// the previous value, if one existed</span>
  <span class="ident">merged_bytes</span>: <span class="kw-2">&amp;</span>[<span class="ident">u8</span>]        <span class="comment">// the new bytes being merged in</span>
) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">u8</span><span class="op">&gt;</span><span class="op">&gt;</span> {       <span class="comment">// set the new value, return None to delete</span>
  <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">ret</span> <span class="op">=</span> <span class="ident">old_value</span>
    .<span class="ident">map</span>(<span class="op">|</span><span class="ident">ov</span><span class="op">|</span> <span class="ident">ov</span>.<span class="ident">to_vec</span>())
    .<span class="ident">unwrap_or_else</span>(<span class="op">|</span><span class="op">|</span> <span class="macro">vec</span><span class="macro">!</span>[]);

  <span class="ident">ret</span>.<span class="ident">extend_from_slice</span>(<span class="ident">merged_bytes</span>);

  <span class="prelude-val">Some</span>(<span class="ident">ret</span>)
}

<span class="ident">db</span>.<span class="ident">set_merge_operator</span>(<span class="ident">concatenate_merge</span>);

<span class="kw">let</span> <span class="ident">k</span> <span class="op">=</span> <span class="string">b&quot;k1&quot;</span>;

<span class="ident">db</span>.<span class="ident">insert</span>(<span class="ident">k</span>, <span class="macro">vec</span><span class="macro">!</span>[<span class="number">0</span>]);
<span class="ident">db</span>.<span class="ident">merge</span>(<span class="ident">k</span>, <span class="macro">vec</span><span class="macro">!</span>[<span class="number">1</span>]);
<span class="ident">db</span>.<span class="ident">merge</span>(<span class="ident">k</span>, <span class="macro">vec</span><span class="macro">!</span>[<span class="number">2</span>]);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">db</span>.<span class="ident">get</span>(<span class="ident">k</span>), <span class="prelude-val">Ok</span>(<span class="prelude-val">Some</span>(<span class="ident">IVec</span>::<span class="ident">from</span>(<span class="macro">vec</span><span class="macro">!</span>[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]))));

<span class="comment">// Replace previously merged data. The merge function will not be called.</span>
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="ident">k</span>, <span class="macro">vec</span><span class="macro">!</span>[<span class="number">3</span>]);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">db</span>.<span class="ident">get</span>(<span class="ident">k</span>), <span class="prelude-val">Ok</span>(<span class="prelude-val">Some</span>(<span class="ident">IVec</span>::<span class="ident">from</span>(<span class="macro">vec</span><span class="macro">!</span>[<span class="number">3</span>]))));

<span class="comment">// Merges on non-present values will cause the merge function to be called</span>
<span class="comment">// with `old_value == None`. If the merge function returns something (which it</span>
<span class="comment">// does, in this case) a new value will be inserted.</span>
<span class="ident">db</span>.<span class="ident">remove</span>(<span class="ident">k</span>);
<span class="ident">db</span>.<span class="ident">merge</span>(<span class="ident">k</span>, <span class="macro">vec</span><span class="macro">!</span>[<span class="number">4</span>]);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">db</span>.<span class="ident">get</span>(<span class="ident">k</span>), <span class="prelude-val">Ok</span>(<span class="prelude-val">Some</span>(<span class="ident">IVec</span>::<span class="ident">from</span>(<span class="macro">vec</span><span class="macro">!</span>[<span class="number">4</span>]))));</pre></div>
</div><h4 id="method.iter" class="method"><code>pub fn <a href="#method.iter" class="fnname">iter</a>(&amp;self) -&gt; Iter</code></h4><div class="docblock"><p>Create a double-ended iterator over the tuples of keys and
values in this tree.</p>
<h1 id="examples-16" class="section-header"><a href="#examples-16">Examples</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">sled</span>::<span class="ident">IVec</span>;
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">1</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">10</span>]);
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">2</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">20</span>]);
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">3</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">30</span>]);
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">iter</span> <span class="op">=</span> <span class="ident">db</span>.<span class="ident">iter</span>();
<span class="macro">assert_eq</span><span class="macro">!</span>(
    <span class="ident">iter</span>.<span class="ident">next</span>().<span class="ident">unwrap</span>(),
    <span class="prelude-val">Ok</span>((<span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">1</span>]), <span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">10</span>])))
);
<span class="macro">assert_eq</span><span class="macro">!</span>(
    <span class="ident">iter</span>.<span class="ident">next</span>().<span class="ident">unwrap</span>(),
    <span class="prelude-val">Ok</span>((<span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">2</span>]), <span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">20</span>])))
);
<span class="macro">assert_eq</span><span class="macro">!</span>(
    <span class="ident">iter</span>.<span class="ident">next</span>().<span class="ident">unwrap</span>(),
    <span class="prelude-val">Ok</span>((<span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">3</span>]), <span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">30</span>])))
);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">iter</span>.<span class="ident">next</span>(), <span class="prelude-val">None</span>);</pre></div>
</div><h4 id="method.range" class="method"><code>pub fn <a href="#method.range" class="fnname">range</a>&lt;K, R&gt;(&amp;self, range: R) -&gt; Iter <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;R: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/range/trait.RangeBounds.html" title="trait core::ops::range::RangeBounds">RangeBounds</a>&lt;K&gt;,&nbsp;</span></code></h4><div class="docblock"><p>Create a double-ended iterator over tuples of keys and values,
where the keys fall within the specified range.</p>
<h1 id="examples-17" class="section-header"><a href="#examples-17">Examples</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">sled</span>::<span class="ident">IVec</span>;
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">0</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">0</span>])<span class="question-mark">?</span>;
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">1</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">10</span>])<span class="question-mark">?</span>;
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">2</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">20</span>])<span class="question-mark">?</span>;
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">3</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">30</span>])<span class="question-mark">?</span>;
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">4</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">40</span>])<span class="question-mark">?</span>;
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">5</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">50</span>])<span class="question-mark">?</span>;

<span class="kw">let</span> <span class="ident">start</span>: <span class="kw-2">&amp;</span>[<span class="ident">u8</span>] <span class="op">=</span> <span class="kw-2">&amp;</span>[<span class="number">2</span>];
<span class="kw">let</span> <span class="ident">end</span>: <span class="kw-2">&amp;</span>[<span class="ident">u8</span>] <span class="op">=</span> <span class="kw-2">&amp;</span>[<span class="number">4</span>];
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">r</span> <span class="op">=</span> <span class="ident">db</span>.<span class="ident">range</span>(<span class="ident">start</span>..<span class="ident">end</span>);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">r</span>.<span class="ident">next</span>().<span class="ident">unwrap</span>(), <span class="prelude-val">Ok</span>((<span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">2</span>]), <span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">20</span>]))));
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">r</span>.<span class="ident">next</span>().<span class="ident">unwrap</span>(), <span class="prelude-val">Ok</span>((<span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">3</span>]), <span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">30</span>]))));
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">r</span>.<span class="ident">next</span>(), <span class="prelude-val">None</span>);

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">r</span> <span class="op">=</span> <span class="ident">db</span>.<span class="ident">range</span>(<span class="ident">start</span>..<span class="ident">end</span>).<span class="ident">rev</span>();
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">r</span>.<span class="ident">next</span>().<span class="ident">unwrap</span>(), <span class="prelude-val">Ok</span>((<span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">3</span>]), <span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">30</span>]))));
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">r</span>.<span class="ident">next</span>().<span class="ident">unwrap</span>(), <span class="prelude-val">Ok</span>((<span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">2</span>]), <span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">20</span>]))));
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">r</span>.<span class="ident">next</span>(), <span class="prelude-val">None</span>);</pre></div>
</div><h4 id="method.scan_prefix" class="method"><code>pub fn <a href="#method.scan_prefix" class="fnname">scan_prefix</a>&lt;P&gt;(&amp;self, prefix: P) -&gt; Iter <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;P: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>&gt;,&nbsp;</span></code></h4><div class="docblock"><p>Create an iterator over tuples of keys and values,
where the all the keys starts with the given prefix.</p>
<h1 id="examples-18" class="section-header"><a href="#examples-18">Examples</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">sled</span>::<span class="ident">IVec</span>;
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>])<span class="question-mark">?</span>;
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>])<span class="question-mark">?</span>;
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">0</span>, <span class="number">0</span>, <span class="number">2</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">0</span>, <span class="number">0</span>, <span class="number">2</span>])<span class="question-mark">?</span>;
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">0</span>, <span class="number">0</span>, <span class="number">3</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">0</span>, <span class="number">0</span>, <span class="number">3</span>])<span class="question-mark">?</span>;
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>])<span class="question-mark">?</span>;
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>])<span class="question-mark">?</span>;

<span class="kw">let</span> <span class="ident">prefix</span>: <span class="kw-2">&amp;</span>[<span class="ident">u8</span>] <span class="op">=</span> <span class="kw-2">&amp;</span>[<span class="number">0</span>, <span class="number">0</span>];
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">r</span> <span class="op">=</span> <span class="ident">db</span>.<span class="ident">scan_prefix</span>(<span class="ident">prefix</span>);
<span class="macro">assert_eq</span><span class="macro">!</span>(
    <span class="ident">r</span>.<span class="ident">next</span>(),
    <span class="prelude-val">Some</span>(<span class="prelude-val">Ok</span>((<span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]), <span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]))))
);
<span class="macro">assert_eq</span><span class="macro">!</span>(
    <span class="ident">r</span>.<span class="ident">next</span>(),
    <span class="prelude-val">Some</span>(<span class="prelude-val">Ok</span>((<span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>]), <span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>]))))
);
<span class="macro">assert_eq</span><span class="macro">!</span>(
    <span class="ident">r</span>.<span class="ident">next</span>(),
    <span class="prelude-val">Some</span>(<span class="prelude-val">Ok</span>((<span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">0</span>, <span class="number">0</span>, <span class="number">2</span>]), <span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">0</span>, <span class="number">0</span>, <span class="number">2</span>]))))
);
<span class="macro">assert_eq</span><span class="macro">!</span>(
    <span class="ident">r</span>.<span class="ident">next</span>(),
    <span class="prelude-val">Some</span>(<span class="prelude-val">Ok</span>((<span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">0</span>, <span class="number">0</span>, <span class="number">3</span>]), <span class="ident">IVec</span>::<span class="ident">from</span>(<span class="kw-2">&amp;</span>[<span class="number">0</span>, <span class="number">0</span>, <span class="number">3</span>]))))
);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">r</span>.<span class="ident">next</span>(), <span class="prelude-val">None</span>);</pre></div>
</div><h4 id="method.first" class="method"><code>pub fn <a href="#method.first" class="fnname">first</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(</a>IVec, IVec<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">)</a>&gt;, Error&gt;</code></h4><div class="docblock"><p>Returns the first key and value in the <code>Tree</code>, or
<code>None</code> if the <code>Tree</code> is empty.</p>
</div><h4 id="method.last" class="method"><code>pub fn <a href="#method.last" class="fnname">last</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(</a>IVec, IVec<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">)</a>&gt;, Error&gt;</code></h4><div class="docblock"><p>Returns the last key and value in the <code>Tree</code>, or
<code>None</code> if the <code>Tree</code> is empty.</p>
</div><h4 id="method.pop_max" class="method"><code>pub fn <a href="#method.pop_max" class="fnname">pop_max</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(</a>IVec, IVec<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">)</a>&gt;, Error&gt;</code></h4><div class="docblock"><p>Atomically removes the maximum item in the <code>Tree</code> instance.</p>
<h1 id="examples-19" class="section-header"><a href="#examples-19">Examples</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">0</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">0</span>])<span class="question-mark">?</span>;
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">1</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">10</span>])<span class="question-mark">?</span>;
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">2</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">20</span>])<span class="question-mark">?</span>;
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">3</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">30</span>])<span class="question-mark">?</span>;
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">4</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">40</span>])<span class="question-mark">?</span>;
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">5</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">50</span>])<span class="question-mark">?</span>;

<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="kw-2">&amp;</span><span class="ident">db</span>.<span class="ident">pop_max</span>()<span class="question-mark">?</span>.<span class="ident">unwrap</span>().<span class="number">0</span>, <span class="kw-2">&amp;</span>[<span class="number">5</span>]);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="kw-2">&amp;</span><span class="ident">db</span>.<span class="ident">pop_max</span>()<span class="question-mark">?</span>.<span class="ident">unwrap</span>().<span class="number">0</span>, <span class="kw-2">&amp;</span>[<span class="number">4</span>]);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="kw-2">&amp;</span><span class="ident">db</span>.<span class="ident">pop_max</span>()<span class="question-mark">?</span>.<span class="ident">unwrap</span>().<span class="number">0</span>, <span class="kw-2">&amp;</span>[<span class="number">3</span>]);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="kw-2">&amp;</span><span class="ident">db</span>.<span class="ident">pop_max</span>()<span class="question-mark">?</span>.<span class="ident">unwrap</span>().<span class="number">0</span>, <span class="kw-2">&amp;</span>[<span class="number">2</span>]);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="kw-2">&amp;</span><span class="ident">db</span>.<span class="ident">pop_max</span>()<span class="question-mark">?</span>.<span class="ident">unwrap</span>().<span class="number">0</span>, <span class="kw-2">&amp;</span>[<span class="number">1</span>]);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="kw-2">&amp;</span><span class="ident">db</span>.<span class="ident">pop_max</span>()<span class="question-mark">?</span>.<span class="ident">unwrap</span>().<span class="number">0</span>, <span class="kw-2">&amp;</span>[<span class="number">0</span>]);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">db</span>.<span class="ident">pop_max</span>()<span class="question-mark">?</span>, <span class="prelude-val">None</span>);</pre></div>
</div><h4 id="method.pop_min" class="method"><code>pub fn <a href="#method.pop_min" class="fnname">pop_min</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(</a>IVec, IVec<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">)</a>&gt;, Error&gt;</code></h4><div class="docblock"><p>Atomically removes the minimum item in the <code>Tree</code> instance.</p>
<h1 id="examples-20" class="section-header"><a href="#examples-20">Examples</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">0</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">0</span>])<span class="question-mark">?</span>;
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">1</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">10</span>])<span class="question-mark">?</span>;
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">2</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">20</span>])<span class="question-mark">?</span>;
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">3</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">30</span>])<span class="question-mark">?</span>;
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">4</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">40</span>])<span class="question-mark">?</span>;
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="kw-2">&amp;</span>[<span class="number">5</span>], <span class="macro">vec</span><span class="macro">!</span>[<span class="number">50</span>])<span class="question-mark">?</span>;

<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="kw-2">&amp;</span><span class="ident">db</span>.<span class="ident">pop_min</span>()<span class="question-mark">?</span>.<span class="ident">unwrap</span>().<span class="number">0</span>, <span class="kw-2">&amp;</span>[<span class="number">0</span>]);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="kw-2">&amp;</span><span class="ident">db</span>.<span class="ident">pop_min</span>()<span class="question-mark">?</span>.<span class="ident">unwrap</span>().<span class="number">0</span>, <span class="kw-2">&amp;</span>[<span class="number">1</span>]);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="kw-2">&amp;</span><span class="ident">db</span>.<span class="ident">pop_min</span>()<span class="question-mark">?</span>.<span class="ident">unwrap</span>().<span class="number">0</span>, <span class="kw-2">&amp;</span>[<span class="number">2</span>]);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="kw-2">&amp;</span><span class="ident">db</span>.<span class="ident">pop_min</span>()<span class="question-mark">?</span>.<span class="ident">unwrap</span>().<span class="number">0</span>, <span class="kw-2">&amp;</span>[<span class="number">3</span>]);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="kw-2">&amp;</span><span class="ident">db</span>.<span class="ident">pop_min</span>()<span class="question-mark">?</span>.<span class="ident">unwrap</span>().<span class="number">0</span>, <span class="kw-2">&amp;</span>[<span class="number">4</span>]);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="kw-2">&amp;</span><span class="ident">db</span>.<span class="ident">pop_min</span>()<span class="question-mark">?</span>.<span class="ident">unwrap</span>().<span class="number">0</span>, <span class="kw-2">&amp;</span>[<span class="number">5</span>]);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">db</span>.<span class="ident">pop_min</span>()<span class="question-mark">?</span>, <span class="prelude-val">None</span>);</pre></div>
</div><h4 id="method.len" class="method"><code>pub fn <a href="#method.len" class="fnname">len</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></code></h4><div class="docblock"><p>Returns the number of elements in this tree.</p>
<p>Beware: performs a full O(n) scan under the hood.</p>
<h1 id="examples-21" class="section-header"><a href="#examples-21">Examples</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="string">b&quot;a&quot;</span>, <span class="macro">vec</span><span class="macro">!</span>[<span class="number">0</span>]);
<span class="ident">db</span>.<span class="ident">insert</span>(<span class="string">b&quot;b&quot;</span>, <span class="macro">vec</span><span class="macro">!</span>[<span class="number">1</span>]);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">db</span>.<span class="ident">len</span>(), <span class="number">2</span>);</pre></div>
</div><h4 id="method.is_empty" class="method"><code>pub fn <a href="#method.is_empty" class="fnname">is_empty</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></code></h4><div class="docblock"><p>Returns <code>true</code> if the <code>Tree</code> contains no elements.</p>
</div><h4 id="method.clear" class="method"><code>pub fn <a href="#method.clear" class="fnname">clear</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, Error&gt;</code></h4><div class="docblock"><p>Clears the <code>Tree</code>, removing all values.</p>
<p>Note that this is not atomic.</p>
</div><h4 id="method.name" class="method"><code>pub fn <a href="#method.name" class="fnname">name</a>(&amp;self) -&gt; IVec</code></h4><div class="docblock"><p>Returns the name of the tree.</p>
</div><h4 id="method.checksum-1" class="method"><code>pub fn <a href="#method.checksum-1" class="fnname">checksum</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a>, Error&gt;</code></h4><div class="docblock"><p>Returns the CRC32 of all keys and values
in this Tree.</p>
<p>This is O(N) and locks the underlying tree
for the duration of the entire scan.</p>
</div></div><h2 id="trait-implementations" class="small-section-header">Trait Implementations<a href="#trait-implementations" class="anchor"></a></h2><div id="trait-implementations-list"><h3 id="impl-Clone" class="impl"><code class="in-band">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> for <a class="struct" href="../../forest_db/sled/struct.Db.html" title="struct forest_db::sled::Db">Db</a></code><a href="#impl-Clone" class="anchor"></a></h3><div class="impl-items"><h4 id="method.clone" class="method hidden"><code>pub fn <a href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#tymethod.clone" class="fnname">clone</a>(&amp;self) -&gt; <a class="struct" href="../../forest_db/sled/struct.Db.html" title="struct forest_db::sled::Db">Db</a></code></h4><div class='docblock hidden'><p>Returns a copy of the value. <a href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#tymethod.clone">Read more</a></p>
</div><h4 id="method.clone_from" class="method hidden"><code>pub fn <a href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#method.clone_from" class="fnname">clone_from</a>(&amp;mut self, source: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>Self)</code><span class="since" title="Stable since Rust version 1.0.0">1.0.0</span><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/clone.rs.html#128-130" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Performs copy-assignment from <code>source</code>. <a href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#method.clone_from">Read more</a></p>
</div></div><h3 id="impl-Debug" class="impl"><code class="in-band">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> for <a class="struct" href="../../forest_db/sled/struct.Db.html" title="struct forest_db::sled::Db">Db</a></code><a href="#impl-Debug" class="anchor"></a></h3><div class="impl-items"><h4 id="method.fmt" class="method hidden"><code>pub fn <a href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt" class="fnname">fmt</a>(&amp;self, f: &amp;mut <a class="struct" href="https://doc.rust-lang.org/nightly/core/fmt/struct.Formatter.html" title="struct core::fmt::Formatter">Formatter</a>&lt;'_&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/core/fmt/struct.Error.html" title="struct core::fmt::Error">Error</a>&gt;</code></h4><div class='docblock hidden'><p>Formats the value using the given formatter. <a href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt">Read more</a></p>
</div></div><h3 id="impl-Deref" class="impl"><code class="in-band">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a> for <a class="struct" href="../../forest_db/sled/struct.Db.html" title="struct forest_db::sled::Db">Db</a></code><a href="#impl-Deref" class="anchor"></a></h3><div class="impl-items"><h4 id="associatedtype.Target" class="type"><code>type <a href="https://doc.rust-lang.org/nightly/core/ops/deref/trait.Deref.html#associatedtype.Target" class="type">Target</a> = Tree</code></h4><div class='docblock'><p>The resulting type after dereferencing.</p>
</div><h4 id="method.deref" class="method hidden"><code>pub fn <a href="https://doc.rust-lang.org/nightly/core/ops/deref/trait.Deref.html#tymethod.deref" class="fnname">deref</a>(&amp;self) -&gt; &amp;Tree</code></h4><div class='docblock hidden'><p>Dereferences the value.</p>
</div></div><h3 id="impl-Send" class="impl"><code class="in-band">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="../../forest_db/sled/struct.Db.html" title="struct forest_db::sled::Db">Db</a></code><a href="#impl-Send" class="anchor"></a></h3><div class="impl-items"></div><h3 id="impl-Sync" class="impl"><code class="in-band">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="../../forest_db/sled/struct.Db.html" title="struct forest_db::sled::Db">Db</a></code><a href="#impl-Sync" class="anchor"></a></h3><div class="impl-items"></div></div><h2 id="synthetic-implementations" class="small-section-header">Auto Trait Implementations<a href="#synthetic-implementations" class="anchor"></a></h2><div id="synthetic-implementations-list"><h3 id="impl-RefUnwindSafe" class="impl"><code class="in-band">impl !<a class="trait" href="https://doc.rust-lang.org/nightly/std/panic/trait.RefUnwindSafe.html" title="trait std::panic::RefUnwindSafe">RefUnwindSafe</a> for <a class="struct" href="../../forest_db/sled/struct.Db.html" title="struct forest_db::sled::Db">Db</a></code><a href="#impl-RefUnwindSafe" class="anchor"></a><a class="srclink" href="../../src/forest_db/lib.rs.html#1" title="goto source code">[src]</a></h3><div class="impl-items"></div><h3 id="impl-Unpin" class="impl"><code class="in-band">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="struct" href="../../forest_db/sled/struct.Db.html" title="struct forest_db::sled::Db">Db</a></code><a href="#impl-Unpin" class="anchor"></a><a class="srclink" href="../../src/forest_db/lib.rs.html#1" title="goto source code">[src]</a></h3><div class="impl-items"></div><h3 id="impl-UnwindSafe" class="impl"><code class="in-band">impl !<a class="trait" href="https://doc.rust-lang.org/nightly/std/panic/trait.UnwindSafe.html" title="trait std::panic::UnwindSafe">UnwindSafe</a> for <a class="struct" href="../../forest_db/sled/struct.Db.html" title="struct forest_db::sled::Db">Db</a></code><a href="#impl-UnwindSafe" class="anchor"></a><a class="srclink" href="../../src/forest_db/lib.rs.html#1" title="goto source code">[src]</a></h3><div class="impl-items"></div></div><h2 id="blanket-implementations" class="small-section-header">Blanket Implementations<a href="#blanket-implementations" class="anchor"></a></h2><div id="blanket-implementations-list"><h3 id="impl-Any" class="impl"><code class="in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html" title="trait core::any::Any">Any</a> for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: 'static + ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></code><a href="#impl-Any" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/any.rs.html#108-112" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="method.type_id" class="method hidden"><code>pub fn <a href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id" class="fnname">type_id</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/any/struct.TypeId.html" title="struct core::any::TypeId">TypeId</a></code><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/any.rs.html#109-111" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Gets the <code>TypeId</code> of <code>self</code>. <a href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id">Read more</a></p>
</div></div><h3 id="impl-Borrow%3CT%3E" class="impl"><code class="in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;T&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></code><a href="#impl-Borrow%3CT%3E" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#210-214" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="method.borrow" class="method hidden"><code>pub fn <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow" class="fnname">borrow</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>T</code><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#211-213" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Immutably borrows from an owned value. <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow">Read more</a></p>
</div></div><h3 id="impl-BorrowMut%3CT%3E" class="impl"><code class="in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></code><a href="#impl-BorrowMut%3CT%3E" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#217-221" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="method.borrow_mut" class="method hidden"><code>pub fn <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut" class="fnname">borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>T</code><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#218-220" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Mutably borrows from an owned value. <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></p>
</div></div><h3 id="impl-From%3CT%3E" class="impl"><code class="in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</code><a href="#impl-From%3CT%3E" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#552-556" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="method.from" class="method hidden"><code>pub fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html#tymethod.from" class="fnname">from</a>(t: T) -&gt; T</code><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#553-555" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div><h3 id="impl-Into%3CU%3E" class="impl"><code class="in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,&nbsp;</span></code><a href="#impl-Into%3CU%3E" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#541-548" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="method.into" class="method hidden"><code>pub fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html#tymethod.into" class="fnname">into</a>(self) -&gt; U</code><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#545-547" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div><h3 id="impl-Pointable" class="impl"><code class="in-band">impl&lt;T&gt; Pointable for T</code><a href="#impl-Pointable" class="anchor"></a></h3><div class="impl-items"><h4 id="associatedconstant.ALIGN" class="associatedconstant hidden"><code>pub const <a href="#associatedconstant.ALIGN" class="constant"><b>ALIGN</b></a>: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></code></h4><div class='docblock hidden'><p>The alignment of pointer.</p>
</div><h4 id="associatedtype.Init" class="type"><code>type <a href="#associatedtype.Init" class="type">Init</a> = T</code></h4><div class='docblock'><p>The type for initializers.</p>
</div><h4 id="method.init" class="method hidden"><code>pub unsafe fn <a href="#method.init" class="fnname">init</a>(init: &lt;T as Pointable&gt;::Init) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></code></h4><div class='docblock hidden'><p>Initializes a with the given initializer. <a href="#tymethod.init">Read more</a></p>
</div><h4 id="method.deref-1" class="method hidden"><code>pub unsafe fn <a href="#method.deref" class="fnname">deref</a>&lt;'a&gt;(ptr: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;'a </a>T</code></h4><div class='docblock hidden'><p>Dereferences the given pointer. <a href="#tymethod.deref">Read more</a></p>
</div><h4 id="method.deref_mut" class="method hidden"><code>pub unsafe fn <a href="#method.deref_mut" class="fnname">deref_mut</a>&lt;'a&gt;(ptr: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;'a mut </a>T</code></h4><div class='docblock hidden'><p>Mutably dereferences the given pointer. <a href="#tymethod.deref_mut">Read more</a></p>
</div><h4 id="method.drop" class="method hidden"><code>pub unsafe fn <a href="#method.drop" class="fnname">drop</a>(ptr: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>)</code></h4><div class='docblock hidden'><p>Drops the object pointed to by the given pointer. <a href="#tymethod.drop">Read more</a></p>
</div></div><h3 id="impl-Same%3CT%3E" class="impl"><code class="in-band">impl&lt;T&gt; Same&lt;T&gt; for T</code><a href="#impl-Same%3CT%3E" class="anchor"></a></h3><div class="impl-items"><h4 id="associatedtype.Output" class="type"><code>type <a href="#associatedtype.Output" class="type">Output</a> = T</code></h4><div class='docblock'><p>Should always be <code>Self</code></p>
</div></div><h3 id="impl-ToOwned" class="impl"><code class="in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/alloc/borrow/trait.ToOwned.html" title="trait alloc::borrow::ToOwned">ToOwned</a> for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,&nbsp;</span></code><a href="#impl-ToOwned" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/nightly/src/alloc/borrow.rs.html#80-92" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="associatedtype.Owned" class="type"><code>type <a href="https://doc.rust-lang.org/nightly/alloc/borrow/trait.ToOwned.html#associatedtype.Owned" class="type">Owned</a> = T</code></h4><div class='docblock'><p>The resulting type after obtaining ownership.</p>
</div><h4 id="method.to_owned" class="method hidden"><code>pub fn <a href="https://doc.rust-lang.org/nightly/alloc/borrow/trait.ToOwned.html#tymethod.to_owned" class="fnname">to_owned</a>(&amp;self) -&gt; T</code><a class="srclink" href="https://doc.rust-lang.org/nightly/src/alloc/borrow.rs.html#85-87" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Creates owned data from borrowed data, usually by cloning. <a href="https://doc.rust-lang.org/nightly/alloc/borrow/trait.ToOwned.html#tymethod.to_owned">Read more</a></p>
</div><h4 id="method.clone_into" class="method hidden"><code>pub fn <a href="https://doc.rust-lang.org/nightly/alloc/borrow/trait.ToOwned.html#method.clone_into" class="fnname">clone_into</a>(&amp;self, target: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>T)</code><a class="srclink" href="https://doc.rust-lang.org/nightly/src/alloc/borrow.rs.html#89-91" title="goto source code">[src]</a></h4><div class="item-info hidden"><div class="stab unstable"><details><summary><span class="emoji">🔬</span> This is a nightly-only experimental API. (<code>toowned_clone_into</code>)</summary><p>recently added</p>
</details></div></div><div class='docblock hidden'><p>Uses borrowed data to replace owned data, usually by cloning. <a href="https://doc.rust-lang.org/nightly/alloc/borrow/trait.ToOwned.html#method.clone_into">Read more</a></p>
</div></div><h3 id="impl-TryFrom%3CU%3E" class="impl"><code class="in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,&nbsp;</span></code><a href="#impl-TryFrom%3CU%3E" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#589-598" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="associatedtype.Error" class="type"><code>type <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" class="type">Error</a> = <a class="enum" href="https://doc.rust-lang.org/nightly/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></code></h4><div class='docblock'><p>The type returned in the event of a conversion error.</p>
</div><h4 id="method.try_from" class="method hidden"><code>pub fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#tymethod.try_from" class="fnname">try_from</a>(value: U) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="type" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</code><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#595-597" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div><h3 id="impl-TryInto%3CU%3E" class="impl"><code class="in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,&nbsp;</span></code><a href="#impl-TryInto%3CU%3E" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#575-584" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="associatedtype.Error-1" class="type"><code>type <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#associatedtype.Error" class="type">Error</a> = &lt;U as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="type" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></code></h4><div class='docblock'><p>The type returned in the event of a conversion error.</p>
</div><h4 id="method.try_into" class="method hidden"><code>pub fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#tymethod.try_into" class="fnname">try_into</a>(self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="type" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</code><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#581-583" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div></div></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../../";window.currentCrate = "forest_db";</script><script src="../../main.js"></script><script defer src="../../search-index.js"></script></body></html>